<header
  class="bg-dark-900/95 backdrop-blur border-b border-dark-800 fixed w-full z-50 shadow-lg"
>
  <div class="container mx-auto px-4 flex items-center justify-between h-20">
    <!-- Brand -->
    <a href="{{ url_for('main.index') }}" class="flex items-center gap-2 group">
      <span
        class="text-3xl font-extrabold text-white tracking-tight font-display"
      >
        Rules
        <span
          class="text-transparent bg-clip-text bg-gradient-to-r from-primary-500 to-accent-purple"
          >Central</span
        >
      </span>
    </a>
    <!-- Desktop Nav -->
    <nav class="hidden md:flex items-center gap-6">
      <a href="{{ url_for('main.index') }}" class="nav-link">Home</a>
      <div x-data="{ open: false }" class="relative">
        <button
          @click="open = !open"
          @keydown.escape="open = false"
          class="nav-link flex items-center gap-1"
        >
          Tools
          <svg
            class="w-4 h-4"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 9l-7 7-7-7"
            />
          </svg>
        </button>
        <div
          x-show="open"
          @click.away="open = false"
          x-transition
          class="absolute left-0 mt-2 w-48 bg-dark-800 rounded-xl shadow-2xl py-2 border border-dark-700 z-50"
        >
          <a href="/upload" class="dropdown-link">Upload</a>
          <a href="/rules_extraction_utility" class="dropdown-link"
            >Rules Extraction</a
          >
          <a href="/api_test_utility" class="dropdown-link">API Test</a>
        </div>
      </div>
      <a href="/search" class="nav-link">Search</a>
      <a href="/settings" class="nav-link">Settings</a>
      <a href="/faq" class="nav-link">FAQ</a>
    </nav>
    <!-- Right Controls -->
    <div class="flex items-center gap-2">
      <!-- Theme Toggle -->
      <button class="icon-btn" aria-label="Toggle theme">
        <svg
          class="w-6 h-6"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            d="M12 3v1m0 16v1m8.66-13.66l-.71.71M4.05 19.07l-.71.71M21 12h-1M4 12H3m16.66 5.66l-.71-.71M4.05 4.93l-.71-.71"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
      </button>
      <!-- User Menu -->
      <div x-data="{ open: false }" class="relative">
        <button
          @click="open = !open"
          @keydown.escape="open = false"
          class="icon-btn bg-gradient-to-br from-primary-500 to-accent-purple"
        >
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              d="M5.121 17.804A13.937 13.937 0 0112 15c2.485 0 4.797.755 6.879 2.047M15 11a3 3 0 11-6 0 3 3 0 016 0z"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </button>
        <div
          x-show="open"
          @click.away="open = false"
          x-transition
          class="absolute right-0 mt-2 w-48 bg-dark-800 rounded-xl shadow-2xl py-2 border border-dark-700 z-50"
        >
          <a href="/profile" class="dropdown-link">Profile</a>
          <a href="/settings" class="dropdown-link">Settings</a>
          <div class="border-t border-dark-700 my-1"></div>
          <a
            href="/logout"
            class="dropdown-link text-red-400 hover:bg-red-900/20"
            >Sign out</a
          >
        </div>
      </div>
      <!-- Mobile Menu Button -->
      <div x-data="{ open: false }" class="md:hidden">
        <button @click="open = !open" class="icon-btn" aria-label="Open menu">
          <svg
            class="w-7 h-7"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              d="M4 6h16M4 12h16M4 18h16"
              stroke-width="2"
              stroke-linecap="round"
            />
          </svg>
        </button>
        <div
          x-show="open"
          @click.away="open = false"
          x-transition
          class="absolute right-4 top-20 w-56 bg-dark-800 rounded-2xl shadow-2xl border border-dark-700 z-50 flex flex-col py-4 gap-2"
        >
          <a href="{{ url_for('main.index') }}" class="nav-link">Home</a>
          <a href="/upload" class="nav-link">Upload</a>
          <a href="/rules_extraction_utility" class="nav-link"
            >Rules Extraction</a
          >
          <a href="/api_test_utility" class="nav-link">API Test</a>
          <a href="/search" class="nav-link">Search</a>
          <a href="/settings" class="nav-link">Settings</a>
          <a href="/faq" class="nav-link">FAQ</a>
          <a href="/profile" class="nav-link">Profile</a>
          <a href="/logout" class="nav-link text-red-400 hover:bg-red-900/20"
            >Sign out</a
          >
        </div>
      </div>
    </div>
  </div>
</header>
