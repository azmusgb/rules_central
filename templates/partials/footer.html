{# ============================================================
   Rules Central Global Footer (Refined v2)
   • Fixed container width (prevents full‑bleed giant logo)
   • Explicit logo sizing (clamp height so it never explodes)
   • Balanced grid (brand column width-capped; columns align)
   • Full‑width bottom bar (no floating mini box)
   • Better vertical rhythm + responsive behavior
   • Accessible nav sections; dynamic year fallback
   ============================================================ #}
{% set _year = current_year|default('', true) %}
{% set _ver  = app_version|default('', true) %}

<footer id="rc-footer" class="rc-footer rc-surface-1" role="contentinfo">
  <h2 class="sr-only">Site footer</h2>

  <!-- ================== TOP AREA ================== -->
  <div class="rc-footer-inner">
    <!-- Brand / About ------------------------------------>
    <div class="rc-footer-brand">
      <a href="{{ url_for('main.index') }}" class="rc-footer-brand-link">
        <img src="{{ url_for('static', filename='images/RulesCentralLogo.png') }}"
             alt="Rules Central logo"
             class="rc-footer-logo"
             width="160"
             height="48">
        <span class="rc-footer-brand-name">Rules Central</span>
      </a>
      <p class="rc-footer-tagline">Powerful rule hierarchy management.</p>
    </div>

    <!-- Columns wrapper -->
    <div class="rc-footer-cols">
      <!-- Product ------------------------------------------->
      <nav class="rc-footer-col" aria-labelledby="rcf-product">
        <h3 id="rcf-product" class="rc-footer-heading">Product</h3>
        <ul class="rc-footer-list" role="list">
          <li><a href="{{ url_for('main.catalog') }}" class="rc-footer-link">Catalog</a></li>
          <li><a href="{{ url_for('main.search') }}" class="rc-footer-link">Search</a></li>
          <li><a href="{{ url_for('upload.upload_file') }}" class="rc-footer-link">Upload</a></li>
        </ul>
      </nav>

      <!-- Resources ----------------------------------------->
      <nav class="rc-footer-col" aria-labelledby="rcf-resources">
        <h3 id="rcf-resources" class="rc-footer-heading">Resources</h3>
        <ul class="rc-footer-list" role="list">
          <li><a href="{{ url_for('routes.full_help') }}" class="rc-footer-link">Documentation</a></li>
          <li><a href="{{ url_for('main.contact') }}" class="rc-footer-link">Support</a></li>
          <li><a href="{{ url_for('upload.upload_file') }}" class="rc-footer-link">Get Started</a></li>
        </ul>
      </nav>

      <!-- Legal --------------------------------------------->
      <nav class="rc-footer-col" aria-labelledby="rcf-legal">
        <h3 id="rcf-legal" class="rc-footer-heading">Legal</h3>
        <ul class="rc-footer-list" role="list">
          <li><a href="#" class="rc-footer-link">Privacy</a></li>
          <li><a href="#" class="rc-footer-link">Terms</a></li>
          <li><a href="#" class="rc-footer-link">Cookie Policy</a></li>
        </ul>
      </nav>
    </div>
  </div>

  <hr class="rc-footer-divider" aria-hidden="true">

  <!-- ================== BOTTOM BAR ================== -->
  <div class="rc-footer-bottom">
    <p class="rc-footer-copy">
      &copy; <span id="rc-footer-year">{{ _year }}</span> Rules Central. All rights reserved.
    </p>

    <div class="rc-footer-social" role="navigation" aria-label="Social links">
      <a href="https://github.com" class="rc-social-link" target="_blank" rel="noopener" aria-label="GitHub">
        <span aria-hidden="true" class="rc-social-ico rc-social-ico-gh">
          <!-- GitHub mark -->
          <svg viewBox="0 0 16 16" width="20" height="20" fill="currentColor" aria-hidden="true" focusable="false">
            <path d="M8 0C3.58 0 0 3.73 0 8.33c0 3.68 2.29 6.8 5.47 7.9.4.08.55-.18.55-.39 0-.19-.01-.82-.01-1.49-2 .38-2.53-.5-2.69-.96-.09-.23-.48-.96-.82-1.15-.28-.15-.68-.52-.01-.53.63-.01 1.08.6 1.23.85.72 1.25 1.87.9 2.33.69.07-.54.28-.9.5-1.11-1.78-.21-3.64-.92-3.64-4.07 0-.9.31-1.64.82-2.22-.08-.21-.36-1.06.08-2.2 0 0 .67-.22 2.2.85a7.38 7.38 0 0 1 2-.28c.68 0 1.36.09 2 .28 1.53-1.07 2.2-.85 2.2-.85.44 1.14.16 1.99.08 2.2.51.58.82 1.32.82 2.22 0 3.16-1.87 3.86-3.66 4.06.29.26.54.77.54 1.56 0 1.12-.01 2.02-.01 2.29 0 .21.15.47.55.39A8.34 8.34 0 0 0 16 8.33C16 3.73 12.42 0 8 0Z"/>
          </svg>
        </span>
      </a>
      <a href="https://twitter.com" class="rc-social-link" target="_blank" rel="noopener" aria-label="Twitter / X">
        <span aria-hidden="true" class="rc-social-ico rc-social-ico-x">
          <!-- X/Twitter -->
          <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor" aria-hidden="true" focusable="false">
            <path d="M18.244 2H21l-6.5 7.43L21.818 22H15.96l-4.59-6.6L5.87 22H3.11l7-7.99L2.5 2h5.04l4.14 5.96L18.244 2Z"/>
          </svg>
        </span>
      </a>
    </div>

    <p class="rc-footer-version" aria-label="Application version">{{ _ver or '' }}</p>
  </div>
</footer>

{# ============================================================
   Inline Footer Styles (fallback; safe if main CSS missing)
   ============================================================ #}
<style>
/* Layout container ------------------------------------------------ */
#rc-footer{width:100%}
#rc-footer .rc-footer-inner,
#rc-footer .rc-footer-bottom{
  width:100%;
  max-width:var(--rc-site-max,80rem);
  margin-inline:auto;
  padding-inline:clamp(1rem,2vw,2rem);
}

/* Wrapper --------------------------------------------------------- */
.rc-footer{
  margin-top:4rem;
  color:rgb(71 85 105);
  font-size:.9375rem;
  line-height:1.4;
  background:var(--rc-surface-2-light,#f8f8fa);
  border-top:1px solid var(--rc-border-light,rgba(0,0,0,.1));
}
html.dark .rc-footer{
  background:rgb(17 24 39/.95);
  color:rgb(203 213 225);
  border-top-color:var(--rc-border-dark,rgba(255,255,255,.1));
}

/* Brand ----------------------------------------------------------- */
.rc-footer-brand{text-align:center;max-width:18rem;margin-inline:auto;margin-bottom:2.5rem}
@media (min-width:768px){
  .rc-footer-brand{text-align:left;margin-bottom:0;margin-inline:0}
}
.rc-footer-brand-link{text-decoration:none;display:inline-flex;align-items:center;gap:.75rem;font-weight:700;color:inherit}
.rc-footer-logo{display:block;height:2.5rem;max-height:2.5rem;width:auto;max-width:100%;object-fit:contain}
.rc-footer-brand-name{font-size:1.25rem;font-weight:800;color:rgb(30 41 59)}
html.dark .rc-footer-brand-name{color:rgb(248 250 252)}
.rc-footer-tagline{margin:.75rem 0 0;font-size:.9375rem;color:rgb(71 85 105)}
html.dark .rc-footer-tagline{color:rgb(203 213 225)}

/* Columns --------------------------------------------------------- */
.rc-footer-cols{
  display:grid;
  gap:2rem;
  grid-template-columns:repeat(auto-fit,minmax(min(10rem,100%),1fr));
  justify-items:center;
  text-align:center;
  margin-top:3rem;
}
@media (min-width:768px){
  .rc-footer-cols{
    justify-items:start;
    text-align:left;
    margin-top:4rem;
    margin-left:clamp(0rem,5vw,6rem);
    grid-template-columns:repeat(3,minmax(0,1fr));
  }
}
.rc-footer-heading{margin:0 0 1rem;font-size:1rem;font-weight:700;color:rgb(30 41 59)}
html.dark .rc-footer-heading{color:rgb(248 250 252)}
.rc-footer-list{margin:0;padding:0;list-style:none;display:grid;gap:.5rem}
.rc-footer-link{text-decoration:none;color:inherit;transition:color .12s ease}
.rc-footer-link:hover,.rc-footer-link:focus-visible{outline:none;color:var(--rc-accent,#f43f5e);text-decoration:underline}

/* Divider --------------------------------------------------------- */
.rc-footer-divider{
  margin:3rem auto 0;
  width:100%;
  max-width:var(--rc-site-max,80rem);
  border:none;
  border-top:1px solid var(--rc-border-light,rgba(0,0,0,.1));
}
html.dark .rc-footer-divider{border-top-color:var(--rc-border-dark,rgba(255,255,255,.1))}

/* Bottom ---------------------------------------------------------- */
.rc-footer-bottom{
  margin-top:2rem;
  padding-block:1.5rem;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:1rem;
  text-align:center;
  font-size:.875rem;
}
@media (min-width:640px){
  .rc-footer-bottom{
    flex-direction:row;
    justify-content:space-between;
    text-align:left;
  }
}
.rc-footer-copy{margin:0}
.rc-footer-version{margin:0;font-variant-numeric:tabular-nums;color:rgb(148 163 184)}
html.dark .rc-footer-version{color:rgb(148 163 184)}

/* Social ---------------------------------------------------------- */
.rc-footer-social{display:inline-flex;align-items:center;gap:.75rem}
.rc-social-link{text-decoration:none;color:inherit;display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;border-radius:9999px;border:1px solid var(--rc-border-light,rgba(0,0,0,.15));transition:all .12s ease}
html.dark .rc-social-link{border-color:var(--rc-border-dark,rgba(255,255,255,.15))}
.rc-social-link:hover,.rc-social-link:focus-visible{outline:none;color:#fff;background:var(--rc-accent,#f43f5e);border-color:var(--rc-accent,#f43f5e)}
.rc-social-ico{display:inline-block;line-height:0;font-size:0}
.rc-social-ico svg{display:block}

/* Utility --------------------------------------------------------- */
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0 0 0 0);white-space:nowrap;border:0}
</style>

<script>
/* Footer dynamic year fallback: if template var empty, inject JS current year */
document.addEventListener('DOMContentLoaded',()=>{
  const yEl=document.getElementById('rc-footer-year');
  if(yEl && (!yEl.textContent.trim() || yEl.textContent.trim()==='0')){
    yEl.textContent=(new Date()).getFullYear();
  }
});
</script>
