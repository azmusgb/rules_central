{% extends "base.html" %}

{% block title %}Dashboard | Rules Central{% endblock %}

{% block content %}
<div class="dashboard">
  <!-- Stats Cards -->
  <section class="dashboard-section">
    <h2 class="sr-only">Dashboard Statistics</h2>
    <div class="stats-grid">
      <div class="card">
        <div class="flex justify-between items-start">
          <h3 class="text-lg font-medium text-text-heading">Total Rules</h3>
          <i class="fas fa-code-branch text-primary-500"></i>
        </div>
        <div class="text-3xl font-bold mt-2">142</div>
        <div class="flex items-center gap-1 mt-1 text-sm text-text-muted">
          <i class="fas fa-arrow-up text-success-500"></i>
          <span>12% from last week</span>
        </div>
      </div>

      <div class="card">
        <div class="flex justify-between items-start">
          <h3 class="text-lg font-medium text-text-heading">Active Rules</h3>
          <i class="fas fa-bolt text-primary-500"></i>
        </div>
        <div class="text-3xl font-bold mt-2">87</div>
        <div class="progress-container mt-3">
          <div class="progress-fill" style="--progress: 65%"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Quick Actions -->
  <section class="dashboard-section">
    <div class="card">
      <h2 class="text-xl font-bold text-text-heading mb-4">Quick Actions</h2>
      <div class="grid grid-cols-2 gap-3">
        <a href="/rules/new" class="btn btn-primary">
          <i class="fas fa-plus mr-2"></i> New Rule
        </a>
        <a href="/import" class="btn btn-outline">
          <i class="fas fa-file-import mr-2"></i> Import
        </a>
      </div>
    </div>
  </section>

  <!-- Recent Activity -->
  <section class="dashboard-section">
    <div class="card">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-bold text-text-heading">Recent Activity</h2>
        <a href="/activity" class="text-sm text-primary-600 hover:underline">View all</a>
      </div>
      <div class="space-y-3">
        <div class="flex items-start gap-3">
          <div class="p-2 rounded-full bg-primary-100 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400">
            <i class="fas fa-plus"></i>
          </div>
          <div>
            <p class="font-medium">New rule created</p>
            <p class="text-sm text-text-muted">2 minutes ago by you</p>
          </div>
        </div>
        <!-- More activity items -->
      </div>
    </div>
  </section>

  <!-- Rules Overview -->
  <section class="dashboard-section">
    <div class="card">
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6">
        <h2 class="text-xl font-bold text-text-heading">Rules Overview</h2>
        <div class="flex items-center gap-2">
          <button class="px-3 py-1 text-sm rounded-md bg-bg-surface hover:bg-bg-surface/50">7 days</button>
          <button class="px-3 py-1 text-sm rounded-md bg-primary-600 text-white">30 days</button>
          <button class="px-3 py-1 text-sm rounded-md bg-bg-surface hover:bg-bg-surface/50">90 days</button>
          <button class="px-3 py-1 text-sm rounded-md bg-bg-surface hover:bg-bg-surface/50 flex items-center gap-1">
            <i class="fas fa-download"></i> Export
          </button>
        </div>
      </div>
      <div class="h-64">
        <canvas id="rules-chart"></canvas>
      </div>
    </div>
  </section>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const ctx = document.getElementById('rules-chart').getContext('2d');
    new Chart(ctx, {
      type: 'line',
      data: {
        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
        datasets: [{
          label: 'Rules Created',
          data: [12, 19, 3, 5, 2, 3],
          borderColor: '#7C3AED',
          tension: 0.1,
          fill: true,
          backgroundColor: 'rgba(124, 58, 237, 0.1)'
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { display: false }
        }
      }
    });
  });
</script>
{% endblock %}