<div class="fixed bottom-6 right-6 z-50" id="help-system">
  <!-- Help Button -->
  <button
    aria-controls="help-panel"
    aria-expanded="false"
    aria-label="Open help menu"
    title="Open help menu"
    class="w-14 h-14 bg-gradient-to-br from-primary-500 to-accent-purple text-white rounded-full border border-white/5 shadow-lg hover:border-white/10 hover:shadow-2xl transition-all duration-300 ease-out flex items-center justify-center group relative overflow-hidden"
    id="help-button"
  >
    <div
      class="absolute inset-0 bg-white/5 rounded-full scale-0 group-hover:scale-100 transition-transform duration-500"
    ></div>
    <i aria-hidden="true" class="fas fa-question text-xl relative z-10 transform transition-all duration-300 group-hover:rotate-12 group-hover:scale-110"
    ></i>
    <!-- Notification badge -->
    <span
      class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center hidden"
      id="help-notification"
    ></span>
  </button>

  <!-- Help Panel -->
  <div
    aria-labelledby="help-panel-title"
    aria-modal="true"
    class="hidden absolute bottom-full right-0 mb-4 w-96 bg-white/10 backdrop-blur-md border border-white/20 rounded-xl shadow-lg transition-all duration-500 ease-out overflow-hidden"
    id="help-panel"
    role="dialog"
  >
    <div
      class="bg-gradient-to-r from-primary-600 to-primary-700 text-white px-5 py-4 flex items-center justify-between"
    >
      <h3
        class="font-semibold text-base flex items-center"
        id="help-panel-title"
      >
        <i aria-hidden="true" class="fas fa-life-ring mr-2"></i>
        Help Center
      </h3>
      <div class="flex items-center space-x-3">
        <button
          aria-label="Refresh help content"
          title="Refresh help content"
          class="text-white/80 hover:text-white transition-colors"
          id="refresh-help"
        >
          <i aria-hidden="true" class="fas fa-sync-alt"></i>
        </button>
        <button
          aria-label="Close help menu"
          title="Close help menu"
          class="text-white/80 hover:text-white transition-colors"
          id="close-help"
        >
          <i aria-hidden="true" class="fas fa-times"></i>
        </button>
      </div>
    </div>
    <div
      class="p-5 max-h-[60vh] overflow-y-auto custom-scrollbar"
      id="help-content"
    >
      <!-- Fallback content that shows while loading -->
      <div class="text-center py-8" id="help-loading">
        <i aria-hidden="true" class="fas fa-circle-notch fa-spin text-gray-400 text-2xl mb-3"></i>
        <p class="text-gray-400">Loading help content...</p>
      </div>
      <!-- Error state -->
      <div class="hidden text-center py-8" id="help-error">
        <i aria-hidden="true" class="fas fa-exclamation-triangle text-yellow-400 text-2xl mb-3"
        ></i>
        <p class="text-gray-300">Couldn't load help content</p>
        <button
          class="mt-3 text-primary-400 hover:text-primary-300 text-sm flex items-center mx-auto transition-colors duration-200 group"
          id="retry-help"
          aria-label="Retry loading help"
          title="Retry loading help"
        >
          <i aria-hidden="true" class="fas fa-redo mr-2 text-sm group-hover:rotate-180 transition-transform"
          ></i>
          Try Again
        </button>
      </div>
      <!-- Actual content will be inserted here -->
      <div id="help-content-loaded"></div>
    </div>
    <div
      class="bg-dark-700/50 px-5 py-3 border-t border-dark-600/50 flex justify-between items-center"
    >
      <div class="flex space-x-4">
        <a
          class="text-primary-400 hover:text-primary-300 text-sm flex items-center transition-colors duration-200 group"
          href="/full-help"
          title="Open full documentation"
        >
          <i aria-hidden="true" class="fas fa-book-open mr-2 text-sm group-hover:translate-x-0.5 transition-transform"
          ></i>
          Full Documentation
        </a>
        <a
          class="text-primary-400 hover:text-primary-300 text-sm flex items-center transition-colors duration-200 group"
          href="/faq"
          title="Frequently asked questions"
        >
          <i aria-hidden="true" class="fas fa-question-circle mr-2 text-sm group-hover:translate-x-0.5 transition-transform"
          ></i>
          FAQ
        </a>
      </div>
      <span class="text-xs text-gray-500">v{{ config.VERSION }}</span>
    </div>
  </div>
</div>

<script
  defer
  id="help-system-config"
  data-help-url="{{ url_for('static', filename='js/help_system.js') }}"
></script>
<script
  defer
  src="{{ url_for('static', filename='js/help_system_init.js') }}"
></script>
