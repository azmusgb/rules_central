{% extends "base.html" %} {% block title %}Settings | Rules Central{% endblock
%} {% block hero_title %}Settings{% endblock %} {% block hero_subtitle
%}Personalize your Rules Central experience. All changes are saved instantly.{%
endblock %} {% block content %}
<div
  class="flex flex-col items-center justify-center animate-fadeIn delay-200 w-full px-2"
>
  <form
    class="w-full max-w-3xl flex flex-col gap-10"
    method="post"
    enctype="multipart/form-data"
    aria-label="Settings form"
  >
    <!-- Profile Section -->
    <div
      class="bg-dark-800/80 rounded-3xl shadow-2xl border border-dark-700 p-8 u-glass flex flex-col gap-6"
    >
      <div class="flex items-center gap-6 mb-4">
        <label for="avatar" class="relative group cursor-pointer">
          <img
            src="{{ user.avatar_url or url_for('static', filename='images/favicon.ico') }}"
            alt="Avatar"
            class="w-20 h-20 rounded-full border-4 border-primary-500 shadow-lg object-cover group-hover:scale-105 transition-all"
          />
          <input
            type="file"
            id="avatar"
            name="avatar"
            class="hidden"
            accept="image/*"
          />
          <span
            class="absolute bottom-0 right-0 w-7 h-7 rounded-full bg-gradient-to-br from-primary-500 to-accent-purple flex items-center justify-center text-white text-xl shadow-lg border-2 border-dark-900"
            ><svg
              class="w-5 h-5"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                d="M12 4v16m8-8H4"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              /></svg
          ></span>
        </label>
        <div class="flex-1 flex flex-col gap-2">
          <label class="u-text-muted text-sm font-semibold" for="display_name"
            >Display Name</label
          >
          <input
            type="text"
            id="display_name"
            name="display_name"
            value="{{ user.display_name }}"
            class="u-form-input w-full text-lg focus:ring-2 focus:ring-primary-500"
            required
          />
          <label class="u-text-muted text-sm font-semibold mt-2" for="email"
            >Email</label
          >
          <input
            type="email"
            id="email"
            name="email"
            value="{{ user.email }}"
            class="u-form-input w-full text-lg focus:ring-2 focus:ring-primary-500"
            required
          />
        </div>
      </div>
    </div>
    <!-- Theme, Language, Timezone -->
    <div
      class="bg-dark-800/80 rounded-3xl shadow-2xl border border-dark-700 p-8 u-glass flex flex-col gap-6"
    >
      <div class="flex flex-col md:flex-row gap-6">
        <div class="flex-1">
          <label
            class="block u-text-muted mb-2 text-lg font-semibold"
            for="theme"
            >Theme</label
          >
          <select
            id="theme"
            name="theme"
            class="u-form-input w-full text-lg focus:ring-2 focus:ring-primary-500"
          >
              <option value="system" {% if settings.theme == "system" %}selected{% endif %}>System</option>
              <option value="dark" {% if settings.theme == "dark" %}selected{% endif %}>Dark</option>
              <option value="light" {% if settings.theme == "light" %}selected{% endif %}>Light</option>
          </select>
        </div>
        <div class="flex-1">
          <label
            class="block u-text-muted mb-2 text-lg font-semibold"
            for="language"
            >Language</label
          >
          <select
            id="language"
            name="language"
            class="u-form-input w-full text-lg focus:ring-2 focus:ring-primary-500"
          >
              <option value="en" {% if settings.language == "en" %}selected{% endif %}>English</option>
              <option value="es" {% if settings.language == "es" %}selected{% endif %}>Español</option>
              <option value="fr" {% if settings.language == "fr" %}selected{% endif %}>Français</option>
              <option value="de" {% if settings.language == "de" %}selected{% endif %}>Deutsch</option>
              <option value="zh" {% if settings.language == "zh" %}selected{% endif %}>中文</option>
          </select>
        </div>
        <div class="flex-1">
          <label
            class="block u-text-muted mb-2 text-lg font-semibold"
            for="timezone"
            >Timezone</label
          >
          <select
            id="timezone"
            name="timezone"
            class="w-full rounded-lg bg-dark-900 border border-dark-700 px-4 py-3 text-white focus:ring-2 focus:ring-primary-500 text-lg"
          >
              <option value="UTC" {% if settings.timezone == "UTC" %}selected{% endif %}>UTC</option>
              <option value="America/New_York" {% if settings.timezone == "America/New_York" %}selected{% endif %}>New York (EST)</option>
              <option value="America/Los_Angeles" {% if settings.timezone == "America/Los_Angeles" %}selected{% endif %}>Los Angeles (PST)</option>
              <option value="Europe/London" {% if settings.timezone == "Europe/London" %}selected{% endif %}>London (GMT)</option>
              <option value="Asia/Tokyo" {% if settings.timezone == "Asia/Tokyo" %}selected{% endif %}>Tokyo (JST)</option>
          </select>
        </div>
      </div>
    </div>
    <!-- Notifications -->
    <div
      class="bg-dark-800/80 rounded-3xl shadow-2xl border border-dark-700 p-8 u-glass flex flex-col gap-6"
    >
      <div class="flex flex-col gap-4">
        <label class="flex items-center justify-between cursor-pointer">
          <span class="text-lg text-slate-200 font-semibold"
            >Email Notifications</span
          >
          <input
            type="checkbox"
            name="email_notifications"
            class="sr-only peer"
            {%
            if
            settings.email_notifications
            %}checked{%
            endif
            %}
          />
          <span
            class="w-14 h-8 flex items-center bg-dark-900 rounded-full p-1 duration-300 peer-checked:bg-primary-500 relative"
          >
            <span
              class="dot w-6 h-6 bg-white rounded-full shadow-md transform duration-300 peer-checked:translate-x-6"
            ></span>
          </span>
        </label>
        <label class="flex items-center justify-between cursor-pointer">
          <span class="text-lg text-slate-200 font-semibold"
            >Push Notifications</span
          >
          <input
            type="checkbox"
            name="push_notifications"
            class="sr-only peer"
            {%
            if
            settings.push_notifications
            %}checked{%
            endif
            %}
          />
          <span
            class="w-14 h-8 flex items-center bg-dark-900 rounded-full p-1 duration-300 peer-checked:bg-primary-500 relative"
          >
            <span
              class="dot w-6 h-6 bg-white rounded-full shadow-md transform duration-300 peer-checked:translate-x-6"
            ></span>
          </span>
        </label>
        <label class="flex items-center justify-between cursor-pointer">
          <span class="text-lg text-slate-200 font-semibold"
            >In-App Notifications</span
          >
          <input
            type="checkbox"
            name="inapp_notifications"
            class="sr-only peer"
            {%
            if
            settings.inapp_notifications
            %}checked{%
            endif
            %}
          />
          <span
            class="w-14 h-8 flex items-center bg-dark-900 rounded-full p-1 duration-300 peer-checked:bg-primary-500 relative"
          >
            <span
              class="dot w-6 h-6 bg-white rounded-full shadow-md transform duration-300 peer-checked:translate-x-6"
            ></span>
          </span>
        </label>
      </div>
    </div>
    <!-- Security -->
    <div
      class="bg-dark-800/80 rounded-3xl shadow-2xl border border-dark-700 p-8 u-glass flex flex-col gap-6"
    >
      <div class="flex flex-col md:flex-row gap-6">
        <div class="flex-1 flex flex-col gap-2">
          <label class="u-text-muted text-sm font-semibold" for="password"
            >Change Password</label
          >
          <input
            type="password"
            id="password"
            name="password"
            placeholder="New password"
            class="u-form-input w-full text-lg focus:ring-2 focus:ring-primary-500"
          />
        </div>
        <div class="flex-1 flex flex-col gap-2">
          <label class="u-text-muted text-sm font-semibold"
            >Two-Factor Authentication</label
          >
          <label class="flex items-center gap-3 cursor-pointer">
            <input
              type="checkbox"
              name="two_factor"
              class="sr-only peer"
              {%
              if
              security.two_factor_enabled
              %}checked{%
              endif
              %}
            />
            <span
              class="w-14 h-8 flex items-center bg-dark-900 rounded-full p-1 duration-300 peer-checked:bg-primary-500 relative"
            >
              <span
                class="dot w-6 h-6 bg-white rounded-full shadow-md transform duration-300 peer-checked:translate-x-6"
              ></span>
            </span>
            <span class="text-slate-200">Enable 2FA</span>
          </label>
        </div>
      </div>
      <div class="mt-4">
        <div class="u-text-muted text-sm mb-2 font-semibold">
          Active Sessions
        </div>
        <div class="flex flex-col gap-2">
          {% for session in security.active_sessions %}
          <div
            class="flex items-center gap-4 bg-dark-900/80 rounded-lg px-4 py-2"
          >
            <span class="w-3 h-3 rounded-full bg-green-400"></span>
            <span class="text-slate-200 text-sm"
              >{{ session.ip }} &mdash; {{ session.browser }} &mdash; {{
              session.location }} &mdash; {{ session.last_active }}</span
            >
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
    <!-- Experimental Features & Accessibility -->
    <div
      class="bg-dark-800/80 rounded-3xl shadow-2xl border border-dark-700 p-8 u-glass flex flex-col gap-6"
    >
      <label class="flex items-center justify-between cursor-pointer mb-4">
        <span class="text-lg text-slate-200 font-semibold"
          >Enable Experimental Features</span
        >
        <input
          type="checkbox"
          name="experimental_features"
          class="sr-only peer"
          {%
          if
          settings.experimental_features
          %}checked{%
          endif
          %}
        />
        <span
          class="w-14 h-8 flex items-center bg-dark-900 rounded-full p-1 duration-300 peer-checked:bg-primary-500 relative"
        >
          <span
            class="dot w-6 h-6 bg-white rounded-full shadow-md transform duration-300 peer-checked:translate-x-6"
          ></span>
        </span>
      </label>
      <div class="flex flex-col md:flex-row gap-6">
        <div class="flex-1">
          <label
            class="block u-text-muted mb-2 text-lg font-semibold"
            for="font_size"
            >Font Size</label
          >
          <select
            id="font_size"
            name="font_size"
            class="u-form-input w-full text-lg focus:ring-2 focus:ring-primary-500"
          >
              <option value="normal" {% if settings.font_size == "normal" %}selected{% endif %}>Normal</option>
              <option value="large" {% if settings.font_size == "large" %}selected{% endif %}>Large</option>
              <option value="xlarge" {% if settings.font_size == "xlarge" %}selected{% endif %}>Extra Large</option>
          </select>
        </div>
        <div class="flex-1">
          <label
            class="block u-text-muted mb-2 text-lg font-semibold"
            for="contrast"
            >Contrast</label
          >
          <select
            id="contrast"
            name="contrast"
            class="u-form-input w-full text-lg focus:ring-2 focus:ring-primary-500"
          >
              <option value="normal" {% if settings.contrast == "normal" %}selected{% endif %}>Normal</option>
              <option value="high" {% if settings.contrast == "high" %}selected{% endif %}>High Contrast</option>
          </select>
        </div>
        <div class="flex-1">
          <label
            class="block u-text-muted mb-2 text-lg font-semibold"
            for="motion"
            >Motion</label
          >
          <select
            id="motion"
            name="motion"
            class="u-form-input w-full text-lg focus:ring-2 focus:ring-primary-500"
          >
              <option value="normal" {% if settings.motion == "normal" %}selected{% endif %}>Normal</option>
              <option value="reduced" {% if settings.motion == "reduced" %}selected{% endif %}>Reduced Motion</option>
          </select>
        </div>
      </div>
    </div>
    <!-- Account Actions -->
    <div
      class="bg-dark-800/80 rounded-3xl shadow-2xl border border-dark-700 p-8 u-glass flex flex-col gap-6"
    >
      <div class="flex flex-col md:flex-row gap-6 items-center">
        <button
          type="button"
          class="flex-1 px-8 py-4 rounded-xl bg-gradient-to-r from-primary-500 to-accent-purple text-white font-bold shadow-xl hover:scale-105 hover:shadow-2xl transition-all text-lg focus:outline-none focus:ring-4 focus:ring-primary-500"
        >
          Export My Data
        </button>
        <button
          type="button"
          class="flex-1 px-8 py-4 rounded-xl bg-gradient-to-r from-red-500 to-pink-500 text-white font-bold shadow-xl hover:scale-105 hover:shadow-2xl transition-all text-lg focus:outline-none focus:ring-4 focus:ring-red-500"
          onclick="if(confirm('Are you sure you want to delete your account? This action cannot be undone.')){ /* handle delete */ }"
        >
          Delete My Account
        </button>
      </div>
    </div>
    <button
      type="submit"
      class="w-full px-8 py-4 rounded-xl bg-gradient-to-r from-primary-500 to-accent-purple text-white font-bold shadow-xl hover:scale-105 hover:shadow-2xl transition-all text-lg focus:outline-none focus:ring-4 focus:ring-primary-500"
    >
      Save Changes
    </button>
    {% if settings_saved %}
    <div class="mt-6 text-green-400 font-bold text-center animate-fadeIn">
      Settings saved successfully!
    </div>
    {% endif %}
  </form>
</div>
{% endblock %}
