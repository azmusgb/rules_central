{% extends "base.html" %}

{% block title %}Rules Central Dashboard{% endblock %}

{% block meta %}
<meta name="description" content="Comprehensive dashboard for managing and analyzing business rules with key metrics and visualization tools.">
<meta property="og:image" content="{{ url_for('static', filename='images/dashboard-preview.png') }}">
{% endblock %}

{% block hero %}
<section aria-labelledby="hero-heading" class="hero-section relative overflow-hidden">
  <div class="particles absolute inset-0 overflow-hidden pointer-events-none -z-10">
    {% for i in range(15) %}
    <div class="particle" style="--size: {{ [0.5, 1.0, 1.5, 2.0]|random }}px; --x: {{ range(0, 100)|random }}%; --y: {{ range(0, 100)|random }}%; --delay: {{ range(0, 5)|random }}s; --duration: {{ range(10, 30)|random }}s;"></div>
    {% endfor %}
  </div>
  
  <div class="container mx-auto px-4 py-24 text-center relative z-10">
    <h1 id="hero-heading" class="text-4xl sm:text-5xl md:text-6xl font-bold mb-6 tracking-tighter">
      <span class="gradient-text bg-gradient-to-r from-primary-300 via-accent-500 to-primary-300">
        Rules Central Dashboard
      </span>
    </h1>
    <p class="text-lg sm:text-xl md:text-2xl text-gray-300 leading-relaxed max-w-3xl mx-auto">
      <span class="typing-effect">Your comprehensive rules management solution</span>
    </p>
    <div class="mt-8 flex flex-wrap justify-center gap-4">
      <a href="/search" class="px-6 py-3 bg-gradient-to-r from-primary-500 to-accent-purple text-white rounded-lg font-medium shadow-lg hover:shadow-glow-lg transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-white">
        Explore Dashboard
        <span class="sr-only">Navigate to the dashboard explorer</span>
      </a>
      <a href="/getting-started" class="px-6 py-3 bg-dark-700 hover:bg-dark-600 text-white rounded-lg font-medium shadow-md transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-primary-500">
        Quick Start Guide
      </a>
    </div>
  </div>
</section>
{% endblock %}

{% block content %}
<!-- Performance Metrics Section -->
<section aria-labelledby="metrics-heading" class="py-16 bg-dark-800/50">
  <div class="container mx-auto px-4">
    <div class="text-center mb-12">
      <h2 id="metrics-heading" class="text-3xl font-bold text-white mb-2">Key Performance Metrics</h2>
      <p class="text-gray-400 max-w-2xl mx-auto">Real-time insights into your rules ecosystem</p>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6" id="metricsContainer">
      {% set metrics = [
        ['fa-project-diagram', 'Diagrams Processed', 'diagramCount', 'primary', 75],
        ['fa-sitemap', 'Rules Extracted', 'rulesExtractedCount', 'emerald', 65],
        ['fa-tasks', 'Rules by Status', 'rulesStatusChart', 'green', 80],
        ['fa-history', 'Recent Changes', 'recentChangesCount', 'purple', 50]
      ] %}
      
      {% for icon, label, id, color, progress in metrics %}
      <div class="metric-card animate-on-scroll" 
           data-metric-id="{{ id }}"
           data-delay="{{ loop.index * 100 }}"
           aria-labelledby="{{ id }}-label {{ id }}-value">
        <div class="metric-icon bg-{{ color }}-500/20 text-{{ color }}-500">
          <i class="fas {{ icon }}" aria-hidden="true"></i>
        </div>
        <div class="metric-content">
          <span id="{{ id }}-label" class="metric-label">{{ label }}</span>
          <div class="metric-value-container">
            <span id="{{ id }}-value" class="metric-value" aria-live="polite">
              <span class="sr-only">Loading</span>
              <span class="countup">0</span>
            </span>
            <span class="metric-trend bg-{{ color }}-500/20 text-{{ color }}-500" data-trend="up">
              <i class="fas fa-arrow-up" aria-hidden="true"></i>
              <span class="sr-only">Increasing</span>
            </span>
          </div>
          <div class="metric-progress">
            <div class="progress-bar bg-{{ color }}-500/30">
              <div class="progress-fill bg-{{ color }}-500" style="width: {{ progress }}%"></div>
            </div>
            <span class="sr-only">Progress: {{ progress }}%</span>
          </div>
        </div>
        <div class="metric-loading">
          <div class="loading-spinner" aria-hidden="true"></div>
          <span class="sr-only">Loading {{ label }} data</span>
        </div>
        <div class="metric-error">
          <div class="error-message">
            <i class="fas fa-exclamation-circle" aria-hidden="true"></i>
            <span>Failed to load</span>
          </div>
          <button class="retry-btn" 
                  aria-label="Retry loading {{ label }} data"
                  data-metric="{{ id }}">
            <i class="fas fa-sync-alt" aria-hidden="true"></i> Retry
          </button>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</section>

<!-- Features Section -->
<section aria-labelledby="features-heading" class="py-16 bg-dark-900/50">
  <div class="container mx-auto px-4">
    <div class="text-center mb-12">
      <h2 id="features-heading" class="text-3xl font-bold text-white mb-2">Core Features</h2>
      <p class="text-gray-400 max-w-2xl mx-auto">Powerful tools for rules management and analysis</p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      {% set features = [
        ['fa-upload', 'Create & Upload', 'Upload diagrams with automatic validation and processing', '/upload'],
        ['fa-search', 'Explore & Analyze', 'Advanced query tools with visual rule exploration', '/search'],
        ['fa-tools', 'Tools & Utilities', 'Comprehensive testing and customization utilities', '/api_test_utility']
      ] %}
      
      {% for icon, title, desc, link in features %}
      <article class="feature-card animate-on-scroll" data-delay="{{ loop.index * 100 }}">
        <div class="feature-icon bg-primary-500/20 text-primary-500">
          <i class="fas {{ icon }}" aria-hidden="true"></i>
        </div>
        <h3 class="feature-title">{{ title }}</h3>
        <p class="feature-desc">{{ desc }}</p>
        <a href="{{ link }}" class="feature-link" aria-label="Learn more about {{ title }}">
          Explore feature
          <i class="fas fa-chevron-right" aria-hidden="true"></i>
        </a>
      </article>
      {% endfor %}
    </div>
  </div>
</section>

<!-- Quick Start Section -->
<section aria-labelledby="quickstart-heading" class="py-16 bg-dark-800/50">
  <div class="container mx-auto px-4">
    <div class="text-center mb-12">
      <h2 id="quickstart-heading" class="text-3xl font-bold text-white mb-2">Get Started in Minutes</h2>
      <p class="text-gray-400 max-w-2xl mx-auto">Three simple steps to unleash the power of Rules Central</p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      {% set steps = [
        ['fa-upload', '1. Upload Diagrams', 'Import your diagrams or data using our intuitive upload tool with automatic validation'],
        ['fa-magic', '2. Extract Rules', 'Our system automatically processes and extracts rules from your diagrams'],
        ['fa-chart-line', '3. Visualize Results', 'Explore insights with our interactive dashboards and reporting tools']
      ] %}
      
      {% for icon, title, desc in steps %}
      <div class="step-card animate-on-scroll" data-delay="{{ loop.index * 100 }}">
        <div class="step-number">{{ loop.index }}</div>
        <div class="step-icon bg-primary-500/20 text-primary-500">
          <i class="fas {{ icon }}" aria-hidden="true"></i>
        </div>
        <h3 class="step-title">{{ title }}</h3>
        <p class="step-desc">{{ desc }}</p>
      </div>
      {% endfor %}
    </div>
  </div>
</section>

<!-- Data Visualization Section -->
<section aria-labelledby="visualization-heading" class="py-16 bg-dark-900/50">
  <div class="container mx-auto px-4">
    <div class="text-center mb-12">
      <h2 id="visualization-heading" class="text-3xl font-bold text-white mb-2">Rules Analytics</h2>
      <p class="text-gray-400 max-w-2xl mx-auto">Interactive visualizations of your rules data</p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
      <div class="chart-card animate-on-scroll">
        <div class="chart-header">
          <h3 class="chart-title">Rules by Category</h3>
          <div class="chart-actions">
            <button class="chart-action-btn" aria-label="Refresh chart data">
              <i class="fas fa-sync-alt" aria-hidden="true"></i>
            </button>
            <button class="chart-action-btn" aria-label="Download chart">
              <i class="fas fa-download" aria-hidden="true"></i>
            </button>
          </div>
        </div>
        <div class="chart-container">
          <canvas id="rulesByCategoryChart" aria-label="Rules by category chart" role="img"></canvas>
        </div>
      </div>
      
      <div class="chart-card animate-on-scroll">
        <div class="chart-header">
          <h3 class="chart-title">Rules Status Distribution</h3>
          <div class="chart-actions">
            <button class="chart-action-btn" aria-label="Refresh chart data">
              <i class="fas fa-sync-alt" aria-hidden="true"></i>
            </button>
            <button class="chart-action-btn" aria-label="Download chart">
              <i class="fas fa-download" aria-hidden="true"></i>
            </button>
          </div>
        </div>
        <div class="chart-container">
          <canvas id="rulesStatusChart" aria-label="Rules status distribution chart" role="img"></canvas>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Loading Overlay -->
<div id="globalLoader" class="loading-overlay" aria-live="assertive" aria-busy="true">
  <div class="loading-content">
    <div class="loading-spinner" aria-hidden="true"></div>
    <p class="loading-text">Loading Dashboard</p>
    <div class="loading-progress" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div>
  </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Performance metrics configuration
    const METRICS_API_ENDPOINT = '/api/metrics';
    const METRIC_UPDATE_INTERVAL = 300000; // 5 minutes
    let metricsRefreshTimer;
    
    // Initialize dashboard components
    const initDashboard = () => {
        initLoader();
        initScrollAnimations();
        initRetryHandlers();
        setupMetricRefresh();
        initCharts();
        loadInitialData();
    };
    
    // Initialize loader animation
    const initLoader = () => {
        const loader = document.getElementById('globalLoader');
        if (!loader) return;
        
        let progress = 0;
        const progressBar = loader.querySelector('.loading-progress');
        const interval = setInterval(() => {
            progress += Math.random() * 10;
            if (progress >= 100) {
                progress = 100;
                clearInterval(interval);
                setTimeout(() => {
                    loader.classList.add('fade-out');
                    setTimeout(() => loader.remove(), 500);
                }, 300);
            }
            progressBar.style.width = `${progress}%`;
            progressBar.setAttribute('aria-valuenow', progress);
        }, 100);
    };
    
    // Initialize scroll animations
    const initScrollAnimations = () => {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate-in');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 });
        
        document.querySelectorAll('.animate-on-scroll').forEach(el => {
            const delay = el.dataset.delay || 0;
            el.style.setProperty('--animation-delay', `${delay}ms`);
            observer.observe(el);
        });
    };
    
    // Initialize retry functionality for failed metrics
    const initRetryHandlers = () => {
        document.querySelectorAll('.retry-btn').forEach(btn => {
            btn.addEventListener('click', async () => {
                const metricId = btn.dataset.metric;
                const card = btn.closest('.metric-card');
                const loadingState = card?.querySelector('.metric-loading');
                const errorState = card?.querySelector('.metric-error');
                
                if (loadingState) loadingState.classList.remove('hidden');
                if (errorState) errorState.classList.add('hidden');
                
                try {
                    const data = await fetchMetricsData();
                    updateMetricCard(card, data);
                } catch (error) {
                    console.error(`Error retrying metric ${metricId}:`, error);
                    if (loadingState) loadingState.classList.add('hidden');
                    if (errorState) errorState.classList.remove('hidden');
                }
            });
        });
    };
    
    // Set up periodic metric refresh
    const setupMetricRefresh = () => {
        const refreshMetrics = async () => {
            try {
                const data = await fetchMetricsData();
                updateAllMetrics(data);
            } catch (error) {
                console.error('Failed to refresh metrics:', error);
            } finally {
                metricsRefreshTimer = setTimeout(refreshMetrics, METRIC_UPDATE_INTERVAL);
            }
        };
        
        // Initial load
        refreshMetrics();
        
        // Handle page visibility changes
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                clearTimeout(metricsRefreshTimer);
            } else {
                refreshMetrics();
            }
        });
    };
    
    // Initialize chart visualizations
    const initCharts = () => {
        // Rules by Category Chart
        const categoryCtx = document.getElementById('rulesByCategoryChart');
        if (categoryCtx) {
            new Chart(categoryCtx, {
                type: 'bar',
                data: {
                    labels: ['Business', 'Technical', 'Compliance', 'Operational'],
                    datasets: [{
                        label: 'Rules Count',
                        data: [120, 85, 60, 45],
                        backgroundColor: [
                            'rgba(59, 130, 246, 0.7)',
                            'rgba(16, 185, 129, 0.7)',
                            'rgba(167, 139, 250, 0.7)',
                            'rgba(239, 68, 68, 0.7)'
                        ],
                        borderColor: [
                            'rgba(59, 130, 246, 1)',
                            'rgba(16, 185, 129, 1)',
                            'rgba(167, 139, 250, 1)',
                            'rgba(239, 68, 68, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.7)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.7)'
                            }
                        }
                    }
                }
            });
        }
        
        // Rules Status Chart
        const statusCtx = document.getElementById('rulesStatusChart');
        if (statusCtx) {
            new Chart(statusCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Active', 'Draft', 'Deprecated', 'Archived'],
                    datasets: [{
                        data: [150, 45, 30, 25],
                        backgroundColor: [
                            'rgba(16, 185, 129, 0.7)',
                            'rgba(59, 130, 246, 0.7)',
                            'rgba(245, 158, 11, 0.7)',
                            'rgba(156, 163, 175, 0.7)'
                        ],
                        borderColor: [
                            'rgba(16, 185, 129, 1)',
                            'rgba(59, 130, 246, 1)',
                            'rgba(245, 158, 11, 1)',
                            'rgba(156, 163, 175, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: {
                                color: 'rgba(255, 255, 255, 0.7)'
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.raw || 0;
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = Math.round((value / total) * 100);
                                    return `${label}: ${value} (${percentage}%)`;
                                }
                            }
                        }
                    },
                    cutout: '70%'
                }
            });
        }
    };
    
    // Fetch metrics data from API
    const fetchMetricsData = async () => {
        try {
            const response = await fetch(METRICS_API_ENDPOINT, {
                headers: {
                    'Cache-Control': 'no-cache',
                    'Pragma': 'no-cache'
                }
            });
            
            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
            return await response.json();
        } catch (error) {
            console.error('Failed to fetch metrics:', error);
            throw error;
        }
    };
    
    // Load initial data
    const loadInitialData = () => {
        fetchMetricsData()
            .then(data => {
                updateAllMetrics(data);
                // Additional data loading can be added here
            })
            .catch(error => {
                console.error('Initial data load failed:', error);
                document.querySelectorAll('.metric-error').forEach(el => {
                    el.classList.remove('hidden');
                });
            });
    };
    
    // Update all metric cards with data
    const updateAllMetrics = (data) => {
        document.querySelectorAll('.metric-card').forEach(card => {
            updateMetricCard(card, data);
        });
    };
    
    // Update individual metric card
    const updateMetricCard = (card, data) => {
        const metricId = card.dataset.metricId;
        const valueElement = card.querySelector('.countup');
        const loadingState = card.querySelector('.metric-loading');
        const errorState = card.querySelector('.metric-error');
        const progressFill = card.querySelector('.progress-fill');
        
        try {
            let value;
            switch(metricId) {
                case 'diagramCount':
                    value = data.diagramsProcessed || 0;
                    break;
                case 'rulesExtractedCount':
                    value = data.rulesExtracted || 0;
                    break;
                case 'rulesStatusChart':
                    value = Object.values(data.rules_by_status || {}).reduce((a, b) => a + b, 0);
                    break;
                case 'recentChangesCount':
                    value = data.recent_changes || 0;
                    break;
                default:
                    value = 0;
            }
            
            // Animate the value
            if (valueElement) {
                const currentValue = parseInt(valueElement.textContent.replace(/,/g, '')) || 0;
                animateValue(valueElement, currentValue, value, 1500);
            }
            
            // Animate progress bar
            if (progressFill) {
                const currentWidth = parseFloat(progressFill.style.width) || 0;
                progressFill.style.width = card.dataset.progress + '%';
            }
            
            // Hide loading/error states
            if (loadingState) loadingState.classList.add('hidden');
            if (errorState) errorState.classList.add('hidden');
            
        } catch (error) {
            console.error(`Error updating metric ${metricId}:`, error);
            if (loadingState) loadingState.classList.add('hidden');
            if (errorState) errorState.classList.remove('hidden');
        }
    };
    
    // Animate numeric values with easing
    const animateValue = (element, start, end, duration) => {
        const startTime = performance.now();
        const formatNumber = (num) => num.toLocaleString();
        
        const updateValue = (currentTime) => {
            const elapsed = currentTime - startTime;
            const progress = Math.min(elapsed / duration, 1);
            const easedProgress = progress < 0.5 
                ? 2 * progress * progress 
                : 1 - Math.pow(-2 * progress + 2, 2) / 2;
            
            const currentValue = Math.floor(start + (end - start) * easedProgress);
            element.textContent = formatNumber(currentValue);
            
            if (progress < 1) {
                requestAnimationFrame(updateValue);
            } else {
                element.textContent = formatNumber(end);
            }
        };
        
        requestAnimationFrame(updateValue);
    };
    
    // Initialize the dashboard
    initDashboard();
});
</script>

<style>
/* Animation variables */
:root {
    --animation-duration: 0.6s;
    --animation-easing: cubic-bezier(0.16, 1, 0.3, 1);
}

/* Base styles */
.section-header {
    @apply text-center mb-12;
}

.section-heading {
    @apply text-3xl font-bold mb-2 text-white;
}

.section-subheading {
    @apply text-gray-400 max-w-2xl mx-auto;
}

/* Hero section */
.hero-section {
    @apply bg-gradient-to-r from-dark-800 to-dark-700 py-24;
}

.particle {
    position: absolute;
    width: var(--size);
    height: var(--size);
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    top: var(--y);
    left: var(--x);
    animation: float var(--duration) var(--delay) infinite ease-in-out;
}

@keyframes float {
    0%, 100% { transform: translateY(0) translateX(0); }
    50% { transform: translateY(-20px) translateX(10px); }
}

/* Metric card styles */
.metric-card {
    @apply bg-dark-700 border border-gray-800 rounded-xl p-6 relative overflow-hidden transition-all duration-300 hover:border-primary-500 hover:shadow-lg;
    opacity: 0;
    transform: translateY(20px);
}

.metric-card.animate-in {
    opacity: 1;
    transform: translateY(0);
    transition: opacity var(--animation-duration) var(--animation-easing), 
                transform var(--animation-duration) var(--animation-easing);
    transition-delay: var(--animation-delay, 0ms);
}

.metric-icon {
    @apply w-12 h-12 rounded-full bg-opacity-20 flex items-center justify-center mb-4 text-2xl;
}

.metric-content {
    @apply relative z-10;
}

.metric-label {
    @apply text-gray-400 text-sm font-medium block mb-1;
}

.metric-value-container {
    @apply flex items-baseline gap-2 mb-2;
}

.metric-value {
    @apply text-3xl font-bold text-white;
}

.metric-trend {
    @apply text-xs px-2 py-1 rounded-full bg-opacity-20 flex items-center;
}

.metric-progress {
    @apply h-2 bg-dark-600 rounded-full overflow-hidden mt-4;
}

.progress-bar {
    @apply h-full rounded-full relative;
}

.progress-fill {
    @apply absolute top-0 left-0 h-full rounded-full;
    transition: width 1.5s var(--animation-easing);
}

.metric-loading {
    @apply absolute inset-0 bg-dark-800/90 flex items-center justify-center;
}

.metric-error {
    @apply absolute inset-0 bg-dark-800/90 flex flex-col items-center justify-center hidden;
}

.retry-btn {
    @apply mt-2 text-sm text-primary-500 hover:text-primary-400 transition-colors;
}

/* Feature card styles */
.feature-card {
    @apply bg-dark-700 border border-gray-800 rounded-xl p-8 flex flex-col h-full transition-all duration-300 hover:border-primary-500 hover:shadow-lg;
    opacity: 0;
    transform: translateY(20px);
}

.feature-card.animate-in {
    opacity: 1;
    transform: translateY(0);
    transition: opacity var(--animation-duration) var(--animation-easing), 
                transform var(--animation-duration) var(--animation-easing);
    transition-delay: var(--animation-delay, 0ms);
}

.feature-icon {
    @apply w-16 h-16 rounded-full bg-opacity-20 flex items-center justify-center mb-6 text-2xl transition-all duration-300;
}

.feature-card:hover .feature-icon {
    @apply bg-opacity-30 transform scale-110;
}

.feature-title {
    @apply text-xl font-semibold text-white mb-3;
}

.feature-desc {
    @apply text-gray-400 mb-6 flex-grow;
}

.feature-link {
    @apply text-primary-400 hover:text-primary-300 inline-flex items-center group transition-colors mt-auto;
}

.feature-link i {
    @apply transition-transform duration-300 ml-2;
}

.feature-link:hover i {
    @apply transform translate-x-1;
}

/* Step card styles */
.step-card {
    @apply bg-dark-700 border border-gray-800 rounded-xl p-8 text-center relative overflow-hidden transition-all duration-300 hover:shadow-lg;
    opacity: 0;
    transform: translateY(20px);
}

.step-card.animate-in {
    opacity: 1;
    transform: translateY(0);
    transition: opacity var(--animation-duration) var(--animation-easing), 
                transform var(--animation-duration) var(--animation-easing);
    transition-delay: var(--animation-delay, 0ms);
}

.step-number {
    @apply absolute top-4 right-4 text-4xl font-bold text-gray-800;
}

.step-icon {
    @apply w-16 h-16 rounded-full bg-opacity-20 flex items-center justify-center mx-auto mb-6 text-2xl;
}

.step-title {
    @apply text-xl font-semibold text-white mb-3;
}

.step-desc {
    @apply text-gray-400;
}

/* Chart card styles */
.chart-card {
    @apply bg-dark-700 border border-gray-800 rounded-xl p-6 transition-all duration-300 hover:shadow-lg;
}

.chart-header {
    @apply flex justify-between items-center mb-4;
}

.chart-title {
    @apply text-lg font-semibold text-white;
}

.chart-actions {
    @apply flex gap-2;
}

.chart-action-btn {
    @apply w-8 h-8 flex items-center justify-center rounded-full bg-dark-600 hover:bg-dark-500 text-gray-300 hover:text-white transition-colors;
}

.chart-container {
    @apply relative h-64;
}

/* Loading overlay */
.loading-overlay {
    @apply fixed inset-0 bg-dark-900/90 flex items-center justify-center z-50 transition-opacity duration-500;
}

.loading-content {
    @apply text-center max-w-xs;
}

.loading-spinner {
    @apply w-16 h-16 border-4 border-primary-500 border-t-transparent rounded-full animate-spin mx-auto mb-4;
}

.loading-text {
    @apply text-gray-300 mb-2;
}

.loading-progress {
    @apply h-1 bg-gray-800 rounded-full overflow-hidden;
}

.loading-progress::after {
    @apply block h-full bg-primary-500;
    content: '';
}

.fade-out {
    @apply opacity-0 pointer-events-none;
}

/* Animations */
@keyframes spin {
    to { transform: rotate(360deg); }
}

@keyframes fadeInUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}
</style>
{% endblock %}