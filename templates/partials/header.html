{% from 'macros/nav_links.html' import render_nav_links %}

{% set nav_items = [
  {'endpoint': 'main.index', 'icon': 'fas fa-home', 'text': 'Home'},
  {'endpoint': 'routes.catalog', 'icon': 'fas fa-folder', 'text': 'Catalog'},
  {'endpoint': 'upload.upload_file', 'icon': 'fas fa-upload', 'text': 'Upload'},
  {'endpoint': 'main.search', 'icon': 'fas fa-search', 'text': 'Search'},
  {'endpoint': 'user_routes.user_settings', 'icon': 'fas fa-cog', 'text': 'Settings'},
  {'endpoint': 'routes.faq_page', 'icon': 'fas fa-question-circle', 'text': 'FAQ'},
  {'endpoint': 'main.about', 'icon': 'fas fa-info-circle', 'text': 'About'},
  {'endpoint': 'main.contact', 'icon': 'fas fa-envelope', 'text': 'Contact'}
] %}

<header id="site-header" x-data="{openMobile:false}" class="fixed inset-x-0 top-0 z-50 border-b border-dark-700 bg-dark-900/90 backdrop-blur" style="--header-height: 4rem;">
  <div class="u-container flex items-center justify-between h-16">
    <a href="{{ url_for('main.index') }}" class="text-lg font-bold text-white hover:text-primary-400">Rules Central</a>
    <nav class="hidden md:flex items-center gap-6" aria-label="Main navigation">
      <ul class="flex items-center gap-6">
        {{ render_nav_links(nav_items) }}
      </ul>
    </nav>
    <div class="flex items-center gap-3">
      <button id="theme-toggle" @click="theme = theme==='dark' ? 'light' : 'dark'; showToast=true; toastMsg = theme==='dark' ? 'Dark mode' : 'Light mode'" :aria-pressed="theme==='dark'" class="p-2 text-slate-400 hover:text-primary-400 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500" aria-label="Toggle theme">
        <i :class="theme==='dark' ? 'fas fa-sun' : 'fas fa-moon'"></i>
      </button>
      <button id="mobile-menu-btn" @click="openMobile = !openMobile" :aria-expanded="openMobile" class="md:hidden p-2 text-slate-400 hover:text-primary-400 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500" aria-label="Open navigation">
        <i class="fas fa-bars"></i>
      </button>
    </div>  </div>
  <nav id="mobile-menu" x-show="openMobile" x-transition class="md:hidden border-t border-dark-700 bg-dark-900" aria-label="Mobile navigation" @click.away="openMobile=false" style="display:none">
    <ul class="flex flex-col p-4 gap-2">
      {{ render_nav_links(nav_items, is_mobile=true) }}
    </ul>
  </nav>
</header>
