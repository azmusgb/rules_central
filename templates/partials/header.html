{% from 'macros/nav_links.html' import render_nav_links %}

<header id="site-header" 
        class="site-header" 
        x-data="{ mobileMenuOpen: false, userMenuOpen: false }" 
        x-cloak>
  
  <div class="header-container">
    <!-- Logo -->
    <a href="{{ url_for('main.index') }}" class="logo">
      <img src="/static/logo.svg" alt="Rules Central Logo" class="logo-img">
      <span class="logo-text">Rules Central</span>
    </a>

    <!-- Desktop Nav -->
    <nav class="desktop-nav">
      {{ render_nav_links(nav_items) }}
    </nav>

    <!-- User Controls -->
    <div class="user-controls">
      <!-- Theme Toggle -->
      <button class="theme-toggle" aria-label="Toggle theme">
        <i class="fas fa-moon"></i>
      </button>

      <!-- User Menu -->
      <div class="user-menu-container">
        <button class="user-menu-button"
                @click="userMenuOpen = !userMenuOpen"
                aria-label="User menu"
                :aria-expanded="userMenuOpen">
          <i class="fas fa-user-circle"></i>
          <span class="user-name">User Name</span>
        </button>
        
        <div class="user-menu-dropdown" 
             x-show="userMenuOpen"
             @click.outside="userMenuOpen = false">
          <div class="user-info">
            <p class="user-name">User Name</p>
            <p class="user-role">Admin</p>
          </div>
          <a href="{{ url_for('auth.login') }}" class="user-menu-item">
            Sign in
          </a>
        </div>
      </div>

      <!-- Mobile Menu Toggle -->
      <button class="mobile-menu-toggle"
              @click="mobileMenuOpen = !mobileMenuOpen"
              aria-label="Toggle mobile menu"
              :aria-expanded="mobileMenuOpen">
        <i x-show="!mobileMenuOpen" class="fas fa-bars"></i>
        <i x-show="mobileMenuOpen" class="fas fa-times"></i>
      </button>
    </div>
  </div>

  <!-- Mobile Navigation -->
  <nav class="mobile-nav" 
       x-show="mobileMenuOpen"
       @click.outside="mobileMenuOpen = false">
    <div class="mobile-nav-content">
      {{ render_nav_links(nav_items, is_mobile=true) }}
    </div>
  </nav>
</header>