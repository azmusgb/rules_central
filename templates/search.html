{% extends 'base.html' %}
{% block title %}Search{% endblock %}
{% block hero_title %}Search Rules{% endblock %}
{% block hero_subtitle %}Find rules fast with keywords and filters.{% endblock %}
{% block content %}
<section class="u-section py-12">

  <!-- Search bar -->
  <form action="{{ url_for('main.search') }}" method="get" class="flex flex-col sm:flex-row gap-3">
    <div class="relative flex-1">
      <span class="absolute inset-y-0 left-3 flex items-center pointer-events-none text-slate-400">
        <!-- search icon -->
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" stroke="currentColor" fill="none">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M21 21l-4.35-4.35M17.65 17.65A8 8 0 1110 2a8 8 0 017.65 15.65z"/>
        </svg>
      </span>
      <input type="text"
             name="q"
             value="{{ request.args.get('q', '') }}"
             placeholder="Searchâ€¦"
             class="w-full pl-10 pr-4 py-2 rounded-md border border-slate-600 bg-slate-800 text-slate-100 focus:ring-2 focus:ring-primary-500 focus:outline-none"/>
    </div>

    <button
      class="px-5 py-2 rounded-md bg-primary-600 hover:bg-primary-500 text-white font-medium transition">
      Search
    </button>
  </form>

  <!-- Mobile filter toggle -->
  <details class="lg:hidden mt-4">
    <summary class="cursor-pointer text-primary-400 underline">Filters</summary>
    <ul class="mt-2 space-y-2">
      <li><label class="flex items-center"><input type="checkbox" name="f1" class="mr-2">Active</label></li>
      <li><label class="flex items-center"><input type="checkbox" name="f2" class="mr-2">Deprecated</label></li>
    </ul>
  </details>

  <div class="flex mt-8 gap-8">
    <!-- Desktop filters -->
    <aside class="w-64 shrink-0 hidden lg:block card--glass glassmorphism p-4 rounded-2xl">
      <h2 class="text-lg font-semibold mb-3">Filters</h2>
      <ul class="space-y-3">
        <li><label class="flex items-center"><input type="checkbox" name="f1" class="mr-2">Active</label></li>
        <li><label class="flex items-center"><input type="checkbox" name="f2" class="mr-2">Deprecated</label></li>
      </ul>
    </aside>

    <!-- Search results -->
    <section class="flex-1">
      {% if results %}
        <p class="text-sm text-slate-400 mb-3">{{ results|length }} result{{ 's' if results|length != 1 }}</p>
      {% endif %}
      <ul class="divide-y divide-white/10 rounded-xl overflow-hidden card--glass glassmorphism">
        {% for item in results|default([]) %}
          <li class="py-4 px-4 hover:bg-white/5 transition group">
            <a href="#"
               class="text-primary-400 group-hover:text-primary-300 text-lg font-medium">{{ item.name }}</a>
            {% if item.description %}
              <p class="mt-1 text-slate-400 text-sm line-clamp-2">{{ item.description }}</p>
            {% endif %}
          </li>
        {% else %}
          <li class="py-4 px-4 text-slate-400">No results found</li>
        {% endfor %}
      </ul>
    </section>
  </div>
</section>
{% endblock %}
